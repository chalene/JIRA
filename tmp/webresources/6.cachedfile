/* module-key = 'jira.webresources:jira-setup', location = '/includes/setup/setup.js' */
var _gaq=_gaq||[];AJS.$(function($){AJS.$.fn.isDirty=function(){};var setupTracker=require("jira/setup/setup-tracker");setupTracker.insert();function getMailConfigurationAnalyticsData(){var isSkipped=$("#jira-setupwizard-email-notifications-disabled").is(":checked");var params={"emailProvider":"none"};if(isSkipped){return params}var provider=(function(){var v=$("select[name='serviceProvider']").val();return $.isArray(v)?v[0]:v})();$.extend(params,{"emailProvider":provider});if(provider==="custom"){var isSMTP=$("#jira-setupwizard-email-notifications-smtp").is(":checked");if(isSMTP){var hostname=(function(){var hostname=$("input[name='serverName']").val();return["mail","smtp","exchange"].indexOf(hostname)!==-1?hostname:""})();var hostnameExt=(function(){var hostname=$("input[name='serverName']").val().toLowerCase();var pos=hostname.indexOf(".");hostname=(pos!==-1?hostname.substr(0,pos):hostname);return["mail","smtp","exchange","mx","localhost"].indexOf(hostname)!==-1?hostname:""})();$.extend(params,{"emailHostname":hostname,"emailHostnameExt":hostnameExt,"emailPort":$("input[name='port']").val(),"emailProtocol":(function(){var v=$("select[name='protocol']").val();return $.isArray(v)?v[0]:v})()})}$.extend(params,{"emailIsSMTP":isSMTP})}return params}AJS.$("#jira-setupwizard").submit(function(e){var isMailConfiguration=$("body").hasClass("jira-setup-page-mail-notifications");if(isMailConfiguration&&!$(this).data("intercepted")){e.preventDefault();$(this).data("intercepted",true);setTimeout(function(){setupTracker.sendMailConfigurationEvent(getMailConfigurationAnalyticsData()).always(function(){AJS.$("#jira-setupwizard").submit()})},0)}else{if(isMailConfiguration){return true}}AJS.$("#jira-setupwizard-submit, #jira-setupwizard-test-connection, #jira-setupwizard-test-mailserver-connection").attr("disabled","disabled");var serverLanguageSelectList=AJS.$("#jira-setupwizard-server-language");if(serverLanguageSelectList.length>0){serverLanguageSelectList.attr("disabled","disabled")}if((AJS.$("input[name=changingLanguage]").val()=="false"&&AJS.$("input[name=testingConnection]").val()=="testconnection")||(AJS.$("input[name=testingMailConnection]").val()=="true")){AJS.$("#test-connection-throbber").removeClass("hidden")}else{if(AJS.$("input[name=changingLanguage]").val()==="false"||AJS.$("input[name=testingMailConnection]").val()==="false"){AJS.$("#submit-throbber").removeClass("hidden")}}AJS.$("input[name=nextStep]").val("true");AJS.$(".throbber-message").removeClass("hidden")});AJS.$("input[name=databaseOption]").change(function(){var isExternal=AJS.$(this).val()=="EXTERNAL",testbutton=AJS.$("#jira-setupwizard-test-connection"),externalFields=AJS.$("#setup-db-external");if(isExternal){externalFields.removeClass("hidden");testbutton.removeClass("hidden")}else{externalFields.addClass("hidden");testbutton.addClass("hidden")}});var dbPrefills={ports:{},schemas:{}};dbPrefills.ports["postgres72"]="5432";dbPrefills.schemas["postgres72"]="public";dbPrefills.ports["mysql"]="3306";dbPrefills.schemas["mysql"]="";dbPrefills.ports["oracle10g"]="1521";dbPrefills.schemas["oracle10g"]="";dbPrefills.ports["mssql"]="1433";dbPrefills.schemas["mssql"]="dbo";if(AJS.$("input[name=databaseOption]:checked").val()=="EXTERNAL"){AJS.$("#setup-db-external, #jira-setupwizard-test-connection").removeClass("hidden")}function showDbFields(){var db=AJS.$("select[name=databaseType]").val();if(db!=""){AJS.$(".setup-fields").addClass("hidden");AJS.$(".db-option-"+db).removeClass("hidden")}}function showDbTypeDescription(){var $dbTypeSelect=AJS.$("select[name=databaseType]");var $descriptionDiv=$dbTypeSelect.parent().find(".description").empty();var db=$dbTypeSelect.val();if(db!=""){$dbTypeSelect.parent().find(".descriptions ."+db).clone().appendTo($descriptionDiv)}}showDbFields();showDbTypeDescription();AJS.$("select[name=databaseType]").change(function(){var selectedDatabase=AJS.$(this).val(),jdbcField=AJS.$("input[name='jdbcPort']"),schemaField=AJS.$("input[name='schemaName']");jdbcField.val(dbPrefills.ports[selectedDatabase]);schemaField.val(dbPrefills.schemas[selectedDatabase]);showDbFields();showDbTypeDescription()});AJS.$("#jira-setupwizard-test-connection").click(function(){AJS.$("input[name=changingLanguage]").val("false");AJS.$("input[name=testingConnection]").val("true");AJS.$("#jira-setupwizard").submit()});AJS.$("#jira-setupwizard-server-language").change(function(){var lang=AJS.$(this).val();AJS.$("input[name=language]").val(lang);AJS.$("input[name=changingLanguage]").val("true");AJS.$("#jira-setupwizard").submit()});AJS.$("#fetchLicense").click(function(){var formValues=AJS.$("#jira-setupwizard").serializeArray();var url=AJS.$(this).attr("data-url");AJS.$.post(url,formValues,function(){return false})});var $enableAnalytics=AJS.$("#enableAnalytics");if($enableAnalytics.length==1){var yesPlease=AJS.$(".analytics-yes-please");var noThanks=AJS.$(".analytics-no-thanks");var optInToAnalytics=function(enableAnalytics){return function(event){event.preventDefault();$enableAnalytics.val(enableAnalytics);AJS.$(this).closest("form").submit()}};yesPlease.click(optInToAnalytics(true));noThanks.click(optInToAnalytics(false));_.defer(function(){yesPlease.blur()})}var analyticsEnabled=AJS.$('input[name="analytics-enabled"]');if(analyticsEnabled.length>0&&analyticsEnabled.val()==="true"){var ga=document.createElement("script");ga.type="text/javascript";ga.async=true;ga.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ga,s);_gaq.push(["_setAccount","UA-20272869-4"]);_gaq.push(["_setDomainName","none"]);_gaq.push(["_setDetectTitle",false]);var enabled=analyticsEnabled.val()==="true"?1:0;_gaq.push(["_trackEvent","btf.analytics",(enabled?"enable":"disable"),"JIRA",0])}AJS.$("#test-connection-messages").hide();AJS.$("input[name=noemail]").change(function(){var isEnabled=AJS.$(this).val()=="false",notificationFields=AJS.$("#setup-notification-fields"),testButton=AJS.$("#jira-setupwizard-test-mailserver-connection");if(isEnabled){notificationFields.removeClass("hidden");testButton.removeClass("hidden")}else{notificationFields.addClass("hidden");testButton.addClass("hidden")}});if(AJS.$("input[name=noemail]:checked").val()=="false"){AJS.$("#setup-notification-fields, #jira-setupwizard-test-mailserver-connection").removeClass("hidden")}AJS.$("input[name=mailservertype]").change(function(){var type=AJS.$(this).val(),fields=AJS.$(".setup-fields");if(type=="smtp"){fields.addClass("hidden");AJS.$("#email-notifications-smtp-fields").removeClass("hidden")}else{fields.addClass("hidden");AJS.$("#email-notifications-jndi-fields").removeClass("hidden")}});if(AJS.$("input[name=mailservertype]:checked").val()=="smtp"){AJS.$(".setup-fields").addClass("hidden");AJS.$("#email-notifications-smtp-fields").removeClass("hidden")}else{if(AJS.$("input[name=mailservertype]:checked").val()=="jndi"){AJS.$(".setup-fields").addClass("hidden");AJS.$("#email-notifications-jndi-fields").removeClass("hidden")}}AJS.$("#jira-setupwizard-test-mailserver-connection").click(function(){var action="VerifySmtpServerConnection!setup.jspa";AJS.$("input[name=testingMailConnection]").val("true");AJS.$("#jira-setupwizard").attr("action",action).submit()});AJS.$("#reimport").click(function(e){e.preventDefault();AJS.$("input[name=useDefaultPaths]").val("true");AJS.$("#jira-setupwizard").submit()});var ackDowngradeSelector="#acknowledgeDowngradeError";AJS.$(ackDowngradeSelector).click(function(e){e.preventDefault();AJS.$("#acknowledgeDowngradeError").parent().parent().fadeOut();AJS.$("input[name=downgradeAnyway]").val("true")});if(AJS.$("select[name=serviceProvider]").length>0){var smtps=new AJS.ItemDescriptor({value:"smtps",label:"SECURE_SMTP"}),knownServiceProviders={"gmail-smtp":{protocol:smtps,serverName:"smtp.gmail.com",port:"465"},"yahooplus-smtp":{protocol:smtps,serverName:"plus.smtp.mail.yahoo.com",port:"465"}};var serviceProvider=new AJS.SingleSelect({element:AJS.$("select[name=serviceProvider]")});var protocol=new AJS.SingleSelect({element:AJS.$("select[name=protocol]")});AJS.$("select[name=serviceProvider]").change((function(protocol){return function(){var val=AJS.$(this).val();var showFields=false;var serverName=AJS.$("input[name=serverName]"),port=AJS.$("input[name=port]"),tls=AJS.$("input[name=tlsRequired]");var provider=knownServiceProviders[val];if(provider){protocol.setSelection(provider.protocol);serverName.val(provider.serverName);port.val(provider.port)}else{showFields=true}protocol.$container.parent(".field-group").toggle(showFields);serverName.parent(".field-group").toggle(showFields);port.parent(".field-group").toggle(showFields);tls&&tls.parent(".field-group").toggle(showFields)}})(protocol)).change()}else{AJS.$(".select").each(function(){new AJS.SingleSelect({element:this})})}});
/* module-key = 'jira.webresources:jira-setup', location = '/includes/setup/setup-choice.js' */
(function($){$(function(){var activeClassname="jira-setup-choice-box-active";var $choices=$(".jira-setup-choice-box");var $submit=$("#jira-setupwizard-submit");if($("body").hasClass("jira-setup-choice-page")){$submit.enable(false)}$choices.on("click",function(){$choices.removeClass(activeClassname);$(this).addClass(activeClassname);$("#jira-setupwizard-choice-value").val($(this).data("choice-value"));$submit.enable()})})})(AJS.$);
/* module-key = 'jira.webresources:jira-setup', location = '/includes/setup/setup-license.js' */
if(!AJS.isDevMode){AJS.isDevMode=function(){return AJS.Meta.get("dev-mode")}}AJS.$.ajaxSetup({timeout:30000});AJS.$(function($){var firstName,lastName,email,licenseKey,pluginLicenseKey,surveyQuestions;var latestXsrfToken;var DATA_PLUGIN_FAILURE_KEY="plugin-license-failure";var DATA_CONTINUE_SETUP_PROCESS="continue-setup-process";var DATA_CANNOT_AUTHENTICATE="cannot-authenticate";var DATA_CANNOT_AUTHENTICATE_RETRY="cannot-authenticate-retry";var DATA_HAD_ERROR="had-error";var browserSupportsCORS=_.once(function(){return"withCredentials" in new XMLHttpRequest()});var encode_utf8=function(s){return unescape(encodeURIComponent(s))};var decode_utf8=function(s){return decodeURIComponent(escape(s))};var encodeRequestBody=function(obj){var charmap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";var str=encode_utf8(JSON.stringify(obj))+"  ";var result=[];for(var i=0;i+2<str.length;i+=3){var threech=0;for(var j=0;j<3;++j){threech=(threech<<8)+str.charCodeAt(i+j)}for(var j=3;j>=0;--j){var chpart=(threech>>(6*j))&63;result.push(charmap.charAt(chpart))}}return result.join("")};var decodeRequestBody=function(str){if(str.length%4!=0){return"wrong length fail "+str.length}var charmap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";var result=[];for(var i=0;i<str.length;i+=4){var threech=0;for(var j=0;j<4;++j){var chpart=str.charCodeAt(i+j);chpart=charmap.indexOf(String.fromCharCode(chpart));threech=(threech<<6)+chpart}for(var j=2;j>=0;--j){var ch=(threech>>(j*8))&255;result.push(String.fromCharCode(ch))}}return decode_utf8(result.join(""))};var serializeObject=function(obj){var o={};var a=obj.serializeArray();AJS.$.each(a,function(){if(o[this.name]!==undefined){if(!o[this.name].push){o[this.name]=[o[this.name]]}o[this.name].push(this.value||"")}else{o[this.name]=this.value||""}});return o};var pick=function(obj){var copy={};var keys=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));_.each(keys,function(key){if(key in obj){copy[key]=obj[key]}});return copy};var $newMacUserForm=AJS.$(JIRA.Templates.LicenseSetup.renderAddUserForm());$newMacUserForm.submit(_.compose(formSubmitCleanup,newMacUserFormSubmit,showSpinner,disableRadioButtons,disableSubmit,clearErrorsOnForm,preventDefaultOnEvent));$newMacUserForm.find("#email").change(function(){clearWarningsOnForm();var email=AJS.$(this).val();if(AJS.$.trim(email)!==""){checkIfUserExists(email)}});$newMacUserForm.find(".select").each(function(){new AJS.SingleSelect({element:this,setMaxHeightToWindow:true,hasLinks:false}).$container.addClass((" "+this.className+" ").replace(" select "," "))});var $existingMacUserForm=AJS.$(JIRA.Templates.LicenseSetup.renderLoginUserForm());$existingMacUserForm.submit(_.compose(formSubmitCleanup,existingMacUserFormSubmit,showSpinner,disableRadioButtons,disableSubmit,clearErrorsOnForm,preventDefaultOnEvent));var $existingLicenseForm=AJS.$(JIRA.Templates.LicenseSetup.renderExistingLicenseForm({serverId:AJS.Meta.get("server-id")}));$existingLicenseForm.submit(_.compose(formSubmitCleanup,existingLicenseFormSubmit,showSpinner,disableRadioButtons,disableSubmit,clearErrorsOnForm,preventDefaultOnEvent));var setupScreens={"newAccount":showAddUserForm,"login":showExistingMacUserForm,"existingLicense":showExistingLicenseForm};var $licenseInputContainer=AJS.$("#license-input-container");AJS.$("input[name=licenseSetupSelector]").change(switchSetupScreen);function switchSetupScreen(){setupScreens[AJS.$(this).val()]();$licenseInputContainer.children("form").data(DATA_PLUGIN_FAILURE_KEY,false);$licenseInputContainer.children("form").data(DATA_CONTINUE_SETUP_PROCESS,false)}function showAddUserForm(){showForm($newMacUserForm);showSurveySection()}function showExistingMacUserForm(){showForm($existingMacUserForm)}function showExistingLicenseForm(){showForm($existingLicenseForm);if(AJS.Meta.get("setup-chosen-bundle")){$(".existing-licence-login-fields").removeClass("hidden");$(".existing-license-login-information").removeClass("hidden");$(".import-license-header-bundle-selected").removeClass("hidden")}else{$(".import-license-header-no-bundle").removeClass("hidden")}}function showForm(form){$licenseInputContainer.children().detach();$licenseInputContainer.append(form).removeClass("hidden")}function getEventRef(e){return e.target||e.srcElement}function getLasooURL(){return AJS.isDevMode()?"https://id.stg.internal.atlassian.com/":"https://id.atlassian.com/"}function getHamletUrl(){return AJS.isDevMode()?"https://hamlet.stg.intsys.atlassian.com/":"https://hamlet.atlassian.com/"}$licenseInputContainer.on("click",".plugin-license-retry-button",function(e){e.preventDefault();$licenseInputContainer.children("form").submit()});$licenseInputContainer.on("click",".plugin-license-retry2-button",function(e){e.preventDefault();var $form=$licenseInputContainer.children("form");$form.data(DATA_CANNOT_AUTHENTICATE_RETRY,true);$licenseInputContainer.children("form").submit()});$licenseInputContainer.on("click",".plugin-license-next-button",function(e){e.preventDefault();var $form=$licenseInputContainer.children("form");$form.data(DATA_PLUGIN_FAILURE_KEY,false);$form.data(DATA_CONTINUE_SETUP_PROCESS,true);$form.submit()});function createMacUser(formValues){var newUserValues=pick(formValues,"firstName","lastName","email","password","confirmPassword","companyName","country","subscribeNewsletter");if(_.has(newUserValues,"subscribeNewsletter")){newUserValues.subscribeNewsletter="true"}firstName=newUserValues.firstName;lastName=newUserValues.lastName;email=newUserValues.email;var request;if(browserSupportsCORS()){request=AJS.$.ajax({url:getLasooURL()+"profile/rest/signUp",type:"POST",contentType:"application/json",dataType:"json",xhrFields:{withCredentials:true},data:JSON.stringify(newUserValues)})}else{request=AJS.$.ajax({url:getLasooURL()+"profile/rest/signUp",type:"GET",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"POST","h-Content-Type":"application/json",body:encodeRequestBody(newUserValues)}}).pipe(function(jqXHR,textStatus){var jsonResponse=new Object();jsonResponse.status=jqXHR[0].status||jqXHR.status;jsonResponse.message=jqXHR[0].message||jqXHR.message;jsonResponse.responseText=JSON.stringify(jqXHR[1])||"";if(jsonResponse.status!=200){return(jQuery.Deferred().rejectWith(jqXHR,[jsonResponse,textStatus]))}else{jsonResponse.username=jqXHR[1].username;jsonResponse.xsrfToken=jqXHR[1].xsrfToken;return(jQuery.Deferred().resolveWith(jqXHR,[jsonResponse,textStatus]))}})}return request}function surveyQuestionsAvailable(formValues){return !_.isArray(surveyQuestions)||!surveyQuestions.length>0||!formValues[surveyQuestions[0].questionKey]==="undefined"}function submitSurveyQuestions(formValues,licenseId,xsrfToken){if(surveyQuestionsAvailable(formValues)){return jQuery.Deferred.reject()}var answerFunctions={"SELECT":getSurveySelectAnswer,"CHECKBOX":getSurveyCheckboxAnswer,"TEXT":getSurveyTextAnswer};var answers=[];AJS.$.each(surveyQuestions,function(key,question){var answer=formValues[question.questionKey];if(question.responseType in answerFunctions){answers.push(answerFunctions[question.responseType](question,answer))}});if(browserSupportsCORS()){return AJS.$.ajax({url:getHamletUrl()+"1.0/public/survey/saveForLicense",type:"POST",beforeSend:function(xhr){xhr.setRequestHeader("ATL-XSRF-Token",xsrfToken)},xhrFields:{withCredentials:true},contentType:"application/json",dataType:"json",data:JSON.stringify({licenseId:licenseId,responses:answers})})}else{jsonpData={licenseId:licenseId,responses:answers};return AJS.$.ajax({url:getHamletUrl()+"1.0/public/survey/saveForLicense",type:"GET",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"POST","h-Content-Type":"application/json","h-ATL-XSRF-Token":xsrfToken,body:encodeRequestBody(jsonpData)}})}}function doesAnswerAllowFreeText(answers,answerKey){var answer=_.first(AJS.$.grep(answers,function(answer){return answer.key==answerKey}));if(answer==null){return false}else{return answer.freeText}}function getSurveySelectAnswer(question,answer){if(doesAnswerAllowFreeText(question.responseOptions,answer)){var textResponse=AJS.$("input[id='"+question.questionKey+"-text']").val();return{questionKey:question.questionKey,freeTextAnswer:textResponse}}else{return{questionKey:question.questionKey,answers:[answer]}}}function getSurveyCheckboxAnswer(question,answers){var responses=[];var freeTextAnswer="";if(!AJS.$.isArray(answers)){answers=[answers]}_.each(answers,function(answer){if(doesAnswerAllowFreeText(question.responseOptions,answer)){freeTextAnswer=AJS.$("#"+answer+"-text").val()}else{responses.push(answer)}});return{questionKey:question.questionKey,answers:responses,freeTextAnswer:freeTextAnswer}}function getSurveyTextAnswer(question,answer){return{questionKey:question.questionKey,freeTextAnswer:answer||""}}function userExists(username){if(browserSupportsCORS()){return AJS.$.ajax({url:getLasooURL()+"profile/rest/user/"+username,type:"GET",contentType:"application/json",dataType:"json",xhrFields:{withCredentials:true}})}else{return AJS.$.ajax({url:getLasooURL()+"profile/rest/user/"+username,type:"GET",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"GET","h-Content-Type":"application/json"}}).pipe(function(jqXHR,textStatus){if(jqXHR[0].status!=200){return(jQuery.Deferred().rejectWith(jqXHR,[jqXHR[1],textStatus]))}else{return(jQuery.Deferred().resolveWith(jqXHR,[jqXHR[1],textStatus]))}})}}function generatePluginEvaluationLicense(xsrfToken){var pluginLicense;var productServerData={serverId:AJS.Meta.get("server-id")};if(AJS.Meta.get("setup-chosen-bundle")==="SERVICEDESK"){productServerData.productKey="com.atlassian.servicedesk"}else{if(AJS.Meta.get("setup-chosen-bundle")==="DEVELOPMENT"){productServerData.productKey="com.pyxis.greenhopper.jira"}else{var emptyDeferred=AJS.$.Deferred();emptyDeferred.resolve();return emptyDeferred.promise()}}if(browserSupportsCORS()){pluginLicense=AJS.$.ajax({url:getHamletUrl()+"1.0/public/license/createEvaluation",type:"POST",beforeSend:function(xhr){xhr.setRequestHeader("ATL-XSRF-Token",xsrfToken)},xhrFields:{withCredentials:true},contentType:"application/json",dataType:"json",data:JSON.stringify(productServerData)})}else{pluginLicense=AJS.$.ajax({url:getHamletUrl()+"1.0/public/license/createEvaluation",type:"GET",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"POST","h-Content-Type":"application/json","h-ATL-XSRF-Token":xsrfToken,body:encodeRequestBody(productServerData)}}).pipe(function(jqXHR,textStatus){var jsonResponse=new Object();jsonResponse.status=jqXHR[0].status||jqXHR.status;jsonResponse.message=jqXHR[0].message||jqXHR.message;jsonResponse.responseText=JSON.stringify(jqXHR[1])||"";if(jsonResponse.status!=200){return(jQuery.Deferred().rejectWith(jqXHR,[jsonResponse,textStatus]))}else{jsonResponse.licenseKey=jqXHR[1].licenseKey;jsonResponse.id=jqXHR[1].id;return(jQuery.Deferred().resolveWith(jqXHR,[jsonResponse,textStatus]))}})}return pluginLicense}function generatePingback(){var trackingIframe=AJS.$("iframe[src*='pingback']");trackingIframe.attr("src",trackingIframe.attr("src")+"&bundle="+AJS.Meta.get("setup-chosen-bundle"))}function generateEvaluationLicense(xsrfToken){var jiraLicense;generatePingback();if(browserSupportsCORS()){jiraLicense=AJS.$.ajax({url:getHamletUrl()+"1.0/public/license/createEvaluation",type:"POST",beforeSend:function(xhr){xhr.setRequestHeader("ATL-XSRF-Token",xsrfToken)},xhrFields:{withCredentials:true},contentType:"application/json",dataType:"json",data:JSON.stringify({productKey:"jira",serverId:AJS.Meta.get("server-id")})})}else{jsonpData={productKey:"jira",serverId:AJS.Meta.get("server-id")};jiraLicense=AJS.$.ajax({url:getHamletUrl()+"1.0/public/license/createEvaluation",type:"GET",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"POST","h-Content-Type":"application/json","h-ATL-XSRF-Token":xsrfToken,body:encodeRequestBody(jsonpData)}}).pipe(function(jqXHR,textStatus){var jsonResponse=new Object();jsonResponse.status=jqXHR[0].status||jqXHR.status;jsonResponse.message=jqXHR[0].message||jqXHR.message;jsonResponse.responseText=JSON.stringify(jqXHR[1])||"";if(jsonResponse.status!=200){return(jQuery.Deferred().rejectWith(jqXHR,[jsonResponse,textStatus]))}else{jsonResponse.licenseKey=jqXHR[1].licenseKey;jsonResponse.id=jqXHR[1].id;return(jQuery.Deferred().resolveWith(jqXHR,[jsonResponse,textStatus]))}})}return jiraLicense}function loginMacUser(formValues){var loginUserValues=pick(formValues,"username","password");email=loginUserValues.username;if(browserSupportsCORS()){return AJS.$.ajax({url:getLasooURL()+"id/rest/login",type:"POST",contentType:"application/json",dataType:"json",xhrFields:{withCredentials:true},data:JSON.stringify(loginUserValues)})}else{return AJS.$.ajax({url:getLasooURL()+"id/rest/login",type:"POST",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"POST","h-Content-Type":"application/json",body:encodeRequestBody(loginUserValues)}}).pipe(function(jqXHR,textStatus){var jsonResponse=new Object();jsonResponse.status=jqXHR[0].status||jqXHR.status;jsonResponse.message=jqXHR[0].message||jqXHR.message;jsonResponse.responseText=JSON.stringify(jqXHR[1])||"";if(jsonResponse.status!=200){return(jQuery.Deferred().rejectWith(jqXHR,[jsonResponse,textStatus]))}else{jsonResponse.username=jqXHR[1].username;jsonResponse.xsrfToken=jqXHR[1].xsrfToken;return(jQuery.Deferred().resolveWith(jqXHR,[jsonResponse,textStatus]))}})}}function verifyLicense(licenseKey){return AJS.$.ajax({url:contextPath+"SetupLicense!validateLicense.jspa?licenseToValidate="+licenseKey,type:"POST"})}function errorCreatingMacUser(jqXHR,textStatus){if(jqXHR.status===400){var errors=JSON.parse(jqXHR.responseText);var fieldErrors=errors.fieldErrors;if(!_.isUndefined(fieldErrors)&&!AJS.$.isEmptyObject(fieldErrors)){AJS.$.each(fieldErrors,function(key,value){showFieldError(AJS.$("#"+key),value)})}else{if(!_.isUndefined(errors.unknownError)){showFormErrorExpandable("Unknown error occured",AJS.format("An unknown error occured, please contact {0}support{1}.","<a href='https://support.atlassian.com' target='_blank'>","</a>"),fieldErrors.unknownError)}else{showFormError("Unknown error occured",AJS.format("An unknown error occured, please contact {0}support{1}.","<a href='https://support.atlassian.com' target='_blank'>","</a>"))}}}else{generalErrorLogging(jqXHR,textStatus)}}function checkIfUserExists(emailAddress){var userExistsChecker=jQuery.Deferred();var serverRequest=userExists(emailAddress);serverRequest.done(function(jqXHR){if(!formSubmitted){userExistsChecker.resolve(jqXHR)}});serverRequest.fail(function(jqXHR){if(!formSubmitted){userExistsChecker.reject(jqXHR)}});userExistsChecker.fail(clearGeneralErrorsOnForm);userExistsChecker.fail(generalErrorLogging);userExistsChecker.done(function(jqXHR){if(jqXHR.exists==true){showExistingEmailMessage(emailAddress)}});return userExistsChecker}var formSubmitted=false;function newMacUserFormSubmit(e){formSubmitted=true;clearErrorsOnForm();var mainDeferred=jQuery.Deferred();if($newMacUserForm.data(DATA_PLUGIN_FAILURE_KEY)){handlePluginEvaluationLicense(latestXsrfToken,mainDeferred);return mainDeferred}if($newMacUserForm.data(DATA_CONTINUE_SETUP_PROCESS)){mainDeferred.resolve();submitLicenseKey();return mainDeferred}var formValues=serializeObject(AJS.$(getEventRef(e)));var createMacUserDeferred=createMacUser(formValues);createMacUserDeferred.fail(errorCreatingMacUser);createMacUserDeferred.fail(function(){mainDeferred.reject()});createMacUserDeferred.done(function(jqXHR){var xsrfToken=getXSRFTokenFromResponse(jqXHR);latestXsrfToken=xsrfToken;var evalLicenseGenerationDeferred=generateEvaluationLicense(xsrfToken);evalLicenseGenerationDeferred.fail(errorGeneratingEvaluationLicense);evalLicenseGenerationDeferred.fail(function(){mainDeferred.reject()});evalLicenseGenerationDeferred.done(function(jqXHR){var surveyDeferred=submitSurveyQuestions(formValues,getLicenseIdFromResponse(jqXHR),xsrfToken);surveyDeferred.always(function(){var licenseVerificationDeferred=verifyLicense(getLicenseFromResponse(jqXHR));licenseVerificationDeferred.fail(errorVerifyingLicense);licenseVerificationDeferred.fail(function(){mainDeferred.reject()});licenseVerificationDeferred.done(function(){licenseKey=getLicenseFromResponse(jqXHR);handlePluginEvaluationLicense(xsrfToken,mainDeferred)})})})});createMacUserDeferred.always(function(){formSubmitted=false});return mainDeferred}function errorLoggingInMacUser(jqXHR,textStatus){if(jqXHR.status===403){var errors=JSON.parse(jqXHR.responseText);if(!_.isUndefined(errors)){showFormError("Error while signing in",errors.error)}else{showFormError("Unknown error occured",AJS.format("An unknown error occured, please contact {0}support{1}.","<a href='https://support.atlassian.com' target='_blank'>","</a>"))}}else{generalErrorLogging(jqXHR,textStatus)}}function errorLoggingInMacUserExistingLicense(jqXHR,textStatus){if(jqXHR.status===403){showFormError("We\'ve been unable to confirm your details","We can\'t validate your email and password, please enter them again and click Retry, or you can continue your JIRA setup by clicking Next.")}else{var macUrl="my.atlassian.com";var link='<a href="http://'+macUrl+'" target="_blank">'+macUrl+"</a>";showFormError("We can\'t confirm your details",AJS.format("We\'\'ve been unable to connect to {0} to confirm your details. Check that you have a working internet connection and click Retry, or you can continue your JIRA setup by clicking Next.",link))}}function generalErrorLogging(jqXHR,textStatus){if(jqXHR.status===500){showFormError("Internal error","An internal error occured at my.atlassian.com, please try again in a few minutes.")}else{if(jqXHR.status===404){showFormError("Unable to reach my.atlassian.com","Setup was unable to contact my.atlassian.com, please try again in a few minutes.")}else{if(jqXHR.status===0){showFormError("Unable to reach my.atlassian.com",AJS.format("Unable to connect to {0}my.atlassian.com{1}. Make sure you\'\'re connected to the Internet. Otherwise, go to {0}my.atlassian.com{1}, create an account and generate a JIRA license. Then, click \'\'I have a license\'\' above and enter your license key.","<a href='https://id.atlassian.com' target='_blank'>","</a>"))}else{if(textStatus=="timeout"){showFormError("Error contacting my.atlassian.com","A timeout occured while contacting my.atlassian.com, please try again in a few minutes.")}else{showFormError("Unknown error occured",AJS.format("An unknown error occured, please contact {0}support{1}.","<a href='https://support.atlassian.com' target='_blank'>","</a>"))}}}}}function errorGeneratingEvaluationLicense(jqXHR,textStatus){generalErrorLogging(jqXHR,textStatus,"existingLicenseError")}function errorVerifyingLicense(jqXHR,textStatus){if(jqXHR.status===403){var licenseErrors=JSON.parse(jqXHR.responseText);showFormErrorList("We\'re unable to confirm that JIRA license",licenseErrors.errors)}else{generalErrorLogging(jqXHR,textStatus)}}function getXSRFTokenFromResponse(jqXHR){return jqXHR.xsrfToken}function getLicenseFromResponse(jqXHR){return jqXHR.licenseKey}function getLicenseIdFromResponse(jqXHR){return jqXHR.id}function setPersonalDetailsFromLoginForAdminPage(jqXHR){firstName=jqXHR.firstName;lastName=jqXHR.lastName;email=jqXHR.username}function submitLicenseKey(){AJS.$("#setupLicenseKey").val(licenseKey);AJS.$("#setupPluginLicenseKey").val(pluginLicenseKey);AJS.$("#setupFirstName").val(firstName);AJS.$("#setupLastName").val(lastName);AJS.$("#setupEmail").val(email);AJS.$("#setupLicenseForm").submit()}function handlePluginEvaluationLicense(xsrfToken,deferred){generatePluginEvaluationLicense(xsrfToken).fail(function(){deferred.resolve(true)}).done(function(jqXHR){deferred.resolve();if(jqXHR){pluginLicenseKey=jqXHR.licenseKey}submitLicenseKey()})}function existingMacUserFormSubmit(e){clearErrorsOnForm();var mainDeferred=jQuery.Deferred();if($existingMacUserForm.data(DATA_PLUGIN_FAILURE_KEY)){handlePluginEvaluationLicense(latestXsrfToken,mainDeferred);return mainDeferred}if($existingMacUserForm.data(DATA_CONTINUE_SETUP_PROCESS)){mainDeferred.resolve();submitLicenseKey();return mainDeferred}var formValues=serializeObject(AJS.$(getEventRef(e)));var loginMacUserDeferred=loginMacUser(formValues);loginMacUserDeferred.fail(errorLoggingInMacUser);loginMacUserDeferred.fail(function(){mainDeferred.reject()});loginMacUserDeferred.done(function(jqXHR){var xsrfToken=getXSRFTokenFromResponse(jqXHR);latestXsrfToken=xsrfToken;setPersonalDetailsFromLoginForAdminPage(jqXHR);var evalLicenseGenerationDeferred=generateEvaluationLicense(xsrfToken);evalLicenseGenerationDeferred.fail(errorGeneratingEvaluationLicense);evalLicenseGenerationDeferred.fail(function(){mainDeferred.reject()});evalLicenseGenerationDeferred.done(function(jqXHR){var licenseVerificationDeferred=verifyLicense(getLicenseFromResponse(jqXHR));licenseVerificationDeferred.fail(errorVerifyingLicense);licenseVerificationDeferred.fail(function(){mainDeferred.reject()});licenseVerificationDeferred.done(function(){licenseKey=getLicenseFromResponse(jqXHR);handlePluginEvaluationLicense(xsrfToken,mainDeferred)})})});return mainDeferred}function existingLicenseFormSubmit(e){clearErrorsOnForm();var mainDeferred=jQuery.Deferred();var $retryLink=$(".plugin-license-retry2-button");if($existingLicenseForm.data(DATA_PLUGIN_FAILURE_KEY)){handlePluginEvaluationLicense(latestXsrfToken,mainDeferred);return mainDeferred}if($existingLicenseForm.data(DATA_CONTINUE_SETUP_PROCESS)){mainDeferred.resolve();submitLicenseKey();return mainDeferred}var skipPluginLicense=$existingLicenseForm.data(DATA_CANNOT_AUTHENTICATE)&&!$existingLicenseForm.data(DATA_CANNOT_AUTHENTICATE_RETRY);$existingLicenseForm.data(DATA_CANNOT_AUTHENTICATE,false);$existingLicenseForm.data(DATA_CANNOT_AUTHENTICATE_RETRY,false);var formValues=serializeObject(AJS.$(getEventRef(e)));var licenseVerificationDeferred=verifyLicense(formValues.licenseKey);licenseVerificationDeferred.fail(errorVerifyingLicense);licenseVerificationDeferred.fail(function(){mainDeferred.reject()});licenseVerificationDeferred.done(function(){licenseKey=formValues.licenseKey;if(!AJS.Meta.get("setup-chosen-bundle")||skipPluginLicense){mainDeferred.resolve();submitLicenseKey();return mainDeferred}var loginMacUserDeferred=loginMacUser(formValues);loginMacUserDeferred.fail(function(){$retryLink.removeClass("hidden");$existingLicenseForm.data(DATA_CANNOT_AUTHENTICATE,true);$existingLicenseForm.data(DATA_HAD_ERROR,true)});loginMacUserDeferred.fail(errorLoggingInMacUserExistingLicense);loginMacUserDeferred.fail(function(){mainDeferred.reject()});loginMacUserDeferred.done(function(jqXHR){$retryLink.addClass("hidden");$existingLicenseForm.data(DATA_CANNOT_AUTHENTICATE,false);var xsrfToken=getXSRFTokenFromResponse(jqXHR);latestXsrfToken=xsrfToken;setPersonalDetailsFromLoginForAdminPage(jqXHR);handlePluginEvaluationLicense(xsrfToken,mainDeferred)})});return mainDeferred}function showFieldError($field,msg){AJS.$(JIRA.Templates.LicenseSetup.fieldError({msg:msg})).insertAfter($field)}function showExistingEmailMessage(emailAddress){var msg=AJS.format("This looks like an existing email address.  Would you like to {0}login{1} instead?","<a id='email-existing-login-link' href='#'>","</a>");AJS.$("#email").next(".error").remove();AJS.$(JIRA.Templates.LicenseSetup.fieldMessage({id:"email-existing-warning"})).insertAfter(AJS.$("#email"));AJS.$("#email-existing-warning").html(msg);AJS.$("#email-existing-login-link").click(function(){AJS.$('input:radio[name="licenseSetupSelector"]').filter('[value="login"]').attr("checked",true);showExistingMacUserForm();AJS.$("#username").val(emailAddress)})}function showFormError(title,msg){AJS.messages.error("#formError",{title:title,body:msg,closeable:false});AJS.$("#formError").scrollIntoView()}function showFormWarning(title,msg){AJS.messages.warning("#formWarning",{title:title,body:msg,closeable:false});AJS.$("#formWarning").scrollIntoView()}function showFormErrorList(title,msgList){var errorStr="";_.map(msgList,function(msg){errorStr+=msg+"<br />"});AJS.messages.error("#formError",{title:title,body:errorStr,closeable:false});AJS.$("#formError").scrollIntoView()}function showFormErrorExpandable(title,msg,expanded){var $errorMsg=AJS.$(JIRA.Templates.LicenseSetup.expandableFormError({title:title,msg:msg,expandableMsg:expanded}));AJS.$("#formError").html($errorMsg).scrollIntoView();AJS.$("#expandError").click(function(e){e.preventDefault();AJS.$("#expandError").hide();AJS.$("#expandedErrorMsg").show()})}function preventDefaultOnEvent(e){e.preventDefault();return e}function clearGeneralErrorsOnForm(e){AJS.$(".aui-message.error").remove();return e}function clearErrorsOnForm(e){AJS.$(".error").remove();AJS.$(".warning").remove();clearWarningsOnForm();return e}function clearWarningsOnForm(){AJS.$(".warn").remove()}function disableSubmit(e){AJS.$(getEventRef(e)).find(":submit").attr("disabled","disabled");return e}function disableRadioButtons(e){AJS.$('input:radio[name="licenseSetupSelector"]').attr("disabled","disabled");return e}function showSpinner(e){var spinnerMessage=getSpinnerMessage(e);AJS.$(getEventRef(e)).find(".throbbers-placeholder").append(JIRA.Templates.LicenseSetup.renderSpinner({msg:spinnerMessage}));return e}function getSpinnerMessage(e){var currentDialog=AJS.$("input[name=licenseSetupSelector]:checked").val();var message="Loading...";if(AJS.$(e.target).data(DATA_PLUGIN_FAILURE_KEY)||AJS.$(e.target).data(DATA_CANNOT_AUTHENTICATE_RETRY)){return "Retrying..."}else{if(AJS.$(e.target).data(DATA_CONTINUE_SETUP_PROCESS)){return "Saving your license..."}}if(!AJS.Meta.get("setup-chosen-bundle")||AJS.$(e.target).data(DATA_HAD_ERROR)){return "Saving your license..."}switch(currentDialog){case"newAccount":message="Getting your licenses...";break;case"login":message="Getting your licenses...";break;case"existingLicense":message="Getting your license...";break}return message}function formSubmitCleanup(deferred){deferred.fail(function(){$licenseInputContainer.find(":submit").removeAttr("disabled");$licenseInputContainer.find(".throbbers-placeholder").empty();AJS.$('input:radio[name="licenseSetupSelector"]').removeAttr("disabled")}).done(function(isPluginFailure){$licenseInputContainer.children("form").data(DATA_PLUGIN_FAILURE_KEY,isPluginFailure);$licenseInputContainer.children("form").data(DATA_HAD_ERROR,isPluginFailure);$licenseInputContainer.children("form").data(DATA_CONTINUE_SETUP_PROCESS,false);if(!isPluginFailure){return }showFormWarning("We\'ve been unable to generate a plugin license for you","We haven\'t been able to generate the plugin license for you, but you\'ll still be able to access JIRA at this time.");$licenseInputContainer.find(":submit").removeAttr("disabled").addClass("hidden");$licenseInputContainer.find(".throbbers-placeholder").empty();AJS.$('input:radio[name="licenseSetupSelector"]').removeAttr("disabled");$licenseInputContainer.find(".plugin-license-next-button").removeClass("hidden");$licenseInputContainer.find(".plugin-license-retry-button").removeClass("hidden")})}function getSurveyQuestions(){if(browserSupportsCORS()){return AJS.$.ajax({url:getHamletUrl()+"1.0/public/survey/retrieveQuestions?productKey=jira&licenseType=evaluation",type:"GET",contentType:"application/json",dataType:"json"})}else{return AJS.$.ajax({url:getHamletUrl()+"1.0/public/survey/retrieveQuestions?productKey=jira&licenseType=evaluation",type:"GET",contentType:"application/json",dataType:"jsonp",jsonp:"jsonp",data:{method:"GET","h-Content-Type":"application/json"}}).pipe(function(jqXHR,textStatus){if(surveyResponseOk(jqXHR[0].status)){return(jQuery.Deferred().resolveWith(jqXHR,[jqXHR[1],textStatus]))}else{return(jQuery.Deferred().rejectWith(jqXHR,[jqXHR[1],textStatus]))}})}}function surveyResponseOk(statusCode){return statusCode==200||statusCode==204}if(AJS.$("#license-input-container").length){retrieveSurveyQuestions()}function retrieveSurveyQuestions(){var surveyQuestionsDeferred=getSurveyQuestions();surveyQuestionsDeferred.done(function(jqXHR){if(isSurveyQuestionsRetrievalResponseValid(jqXHR)){surveyQuestions=jqXHR;showSurveySection()}else{AJS.$("#survey-section",$newMacUserForm).hide()}});surveyQuestionsDeferred.fail(function(){handleNoInternet()})}function isValidTextQuestion(question){return _.has(question,"questionKey")&&_.has(question,"questionText")}function isValidSelectOrCheckboxQuestion(question){return isValidTextQuestion(question)&&_.has(question,"responseOptions")&&areValidAnswerOptions(question.responseOptions)}function areValidAnswerOptions(answers){for(var i=0;i<answers.length;i++){if(!_.has(answers[i],"key")||!_.has(answers[i],"text")){return false}}return true}function isSurveyQuestionsRetrievalResponseValid(questions){if(questions==null||!_.isArray(questions)){return false}var validQuestionChecks={"SELECT":isValidSelectOrCheckboxQuestion,"CHECKBOX":isValidSelectOrCheckboxQuestion,"TEXT":isValidTextQuestion};for(var i=0;i<questions.length;i++){if(!_.has(questions[i],"responseType")||!(questions[i].responseType in validQuestionChecks)||!validQuestionChecks[questions[i].responseType](questions[i])){return false}}return true}function showSurveySection(){if(surveyQuestions!=undefined&&AJS.$("#survey-section .throbber-message").length==1){$surveyContent=AJS.$(JIRA.Templates.LicenseSetup.surveyQuestionsSection({surveyQuestions:surveyQuestions}));$surveyContent.find(".select").each(function(){new AJS.SingleSelect({element:this,hasLinks:false}).$container.addClass((" "+this.className+" ").replace(" select "," "))});AJS.$("#survey-section").html($surveyContent);AJS.$(".survey-select").change(function(e){var $freeTextContainer=AJS.$("div[id='"+e.target.id+"-container']");var $selectedOption=AJS.$("option:selected",this);if($selectedOption.hasClass("freeText")){$freeTextContainer.val("");$freeTextContainer.show()}else{$freeTextContainer.hide()}});$licenseInputContainer.find(".throbber-message").remove()}}function handleNoInternet(){AJS.$("#survey-section",$newMacUserForm).hide();if(!AJS.$("input[name='licenseSetupSelector']:checked").val()){showExistingLicenseForm();AJS.$("#jira-setupwizard-licenseSetupSelectorexistingLicense").attr("checked","checked")}AJS.$("#no-connection-warning").show()}AJS.$("#license-radio-options").find("input").prop("checked",false)});
/* module-key = 'jira.webresources:jira-setup', location = '/includes/setup/setup-license.soy' */
// This file was automatically generated from setup-license.soy.
// Please don't edit this file by hand.

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.LicenseSetup == 'undefined') { JIRA.Templates.LicenseSetup = {}; }


JIRA.Templates.LicenseSetup.renderAddUserForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form method="post" id="newMacUserForm" class="aui top-label ajs-dirty-warning-exempt"><h3>', soy.$$escapeHtml(AJS.format("Create a new {0} account","my.atlassian.com")), '</h3><p>', soy.$$escapeHtml("Make sure you are connected to the internet before proceeding."), '</p><div id="formError"></div><div id="formWarning"></div><div class="aui-group"><div class="aui-item"><label for="firstName">', soy.$$escapeHtml("First Name"), '</label><input class="text full-width-field" type="text" id="firstName" name="firstName" title="', soy.$$escapeHtml("First Name"), '"></div><div class="aui-item"><label for="lastName">', soy.$$escapeHtml("Last Name"), '</label><input class="text full-width-field" type="text" id="lastName" name="lastName" title="', soy.$$escapeHtml("Last Name"), '"></div></div><div class="aui-group"><div class="aui-item"><label for="email">', soy.$$escapeHtml("Email Address"), '</label><input class="text full-width-field" type="text" id="email" name="email" title="', soy.$$escapeHtml("Email Address"), '"></div></div><div class="aui-group"><div class="aui-item"><label for="password">', soy.$$escapeHtml("Password"), '</label><input class="text full-width-field" type="password" id="password" name="password" title="', soy.$$escapeHtml("Password"), '"></div><div class="aui-item"><label for="confirmPassword">', soy.$$escapeHtml("Confirm Password"), '</label><input class="text full-width-field" type="password" id="confirmPassword" name="confirmPassword" title="', soy.$$escapeHtml("Confirm Password"), '"></div></div><div class="aui-group"><div class="aui-item"><label for="companyName">', soy.$$escapeHtml("Company Name"), '</label><input class="text full-width-field" type="text" id="companyName" name="companyName" title="', soy.$$escapeHtml("Company Name"), '"></div></div><div class="aui-group"><div class="aui-item"><label for="country-field">', soy.$$escapeHtml("Country"), '</label>');
  JIRA.Templates.LicenseSetup.countrySelector({name: 'country', title: "Country"}, output);
  output.append('</div></div><div id="survey-section" class="survey-section">');
  JIRA.Templates.LicenseSetup.renderSpinner({msg: "Loading survey questions ..."}, output);
  output.append('</div><div class="aui-group"><div class="aui-item"><div class="checkbox"><input class="checkbox" type="checkbox" name="subscribeNewsletter" id="subscribeNewsletter" title="', soy.$$escapeHtml("Subscribe to monthly Atlassian Newsletter"), '"><label for="subscribeNewsletter">', soy.$$escapeHtml("Subscribe to monthly Atlassian Newsletter"), '</label></div></div></div><div class="buttons-container"><div class="buttons"><input class="aui-button aui-button-primary" type="submit" value="', soy.$$escapeHtml("Create account and generate license key"), '">');
  JIRA.Templates.LicenseSetup.renderAdditionalButtons(null, output);
  output.append('</div></div></form>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.surveyQuestionsSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.surveyQuestions.length > 0) {
    output.append('<h3>', soy.$$escapeHtml("Take our quick survey"), '</h3>');
    var surveyQuestionList55 = opt_data.surveyQuestions;
    var surveyQuestionListLen55 = surveyQuestionList55.length;
    for (var surveyQuestionIndex55 = 0; surveyQuestionIndex55 < surveyQuestionListLen55; surveyQuestionIndex55++) {
      var surveyQuestionData55 = surveyQuestionList55[surveyQuestionIndex55];
      if (surveyQuestionData55.responseType == 'SELECT') {
        JIRA.Templates.LicenseSetup.renderSelectSurveyQuestion({question: surveyQuestionData55}, output);
      } else if (surveyQuestionData55.responseType == 'CHECKBOX') {
        JIRA.Templates.LicenseSetup.renderCheckboxSurveyQuestion({question: surveyQuestionData55}, output);
      } else if (surveyQuestionData55.responseType == 'TEXT') {
        JIRA.Templates.LicenseSetup.renderTextSurveyQuestion({question: surveyQuestionData55}, output);
      }
    }
  }
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderSelectSurveyQuestion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-group"><div class="aui-item"><label for="', soy.$$escapeHtml(opt_data.question.questionKey), '-field">', soy.$$escapeHtml(opt_data.question.questionText), '</label><select id="', soy.$$escapeHtml(opt_data.question.questionKey), '" name="', soy.$$escapeHtml(opt_data.question.questionKey), '" class="select survey-select full-width-field"><option value="" selected>', soy.$$escapeHtml("Select a response"), '</option>');
  var answerList79 = opt_data.question.responseOptions;
  var answerListLen79 = answerList79.length;
  for (var answerIndex79 = 0; answerIndex79 < answerListLen79; answerIndex79++) {
    var answerData79 = answerList79[answerIndex79];
    output.append('<option value="', soy.$$escapeHtml(answerData79.key), '" ', (answerData79.freeText) ? 'class="freeText"' : '', '>', soy.$$escapeHtml(answerData79.text), '</option>');
  }
  output.append('</select></div></div><div class="aui-group hidden" id="', soy.$$escapeHtml(opt_data.question.questionKey), '-container"><div class="aui-item"><label for="', soy.$$escapeHtml(opt_data.question.questionKey), '-text">', soy.$$escapeHtml("Please specify"), '</label><input class="text full-width-field" type="text" id="', soy.$$escapeHtml(opt_data.question.questionKey), '-text"></div></div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderCheckboxSurveyQuestion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-group"><div class="aui-item"><label>', soy.$$escapeHtml(opt_data.question.questionText), '</label>');
  var answerList103 = opt_data.question.responseOptions;
  var answerListLen103 = answerList103.length;
  for (var answerIndex103 = 0; answerIndex103 < answerListLen103; answerIndex103++) {
    var answerData103 = answerList103[answerIndex103];
    output.append('<div class="checkbox"><input class="checkbox', (answerData103.freeText) ? ' freeText' : '', '" type="checkbox" name="', soy.$$escapeHtml(opt_data.question.questionKey), '" id="', soy.$$escapeHtml(answerData103.key), '" title="', soy.$$escapeHtml(answerData103.text), '" value="', soy.$$escapeHtml(answerData103.key), '"><label for="', soy.$$escapeHtml(answerData103.key), '">', soy.$$escapeHtml(answerData103.text), '</label>', (answerData103.freeText) ? ' <input class="text" id="' + soy.$$escapeHtml(answerData103.key) + '-text">' : '', '</div>');
  }
  output.append('</div></div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderTextSurveyQuestion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-group"><div class="aui-item"><label for="', soy.$$escapeHtml(opt_data.question.questionKey), '">', soy.$$escapeHtml(opt_data.question.questionText), '</label><input class="text full-width-field" type="text" id="', soy.$$escapeHtml(opt_data.question.questionKey), '" name="', soy.$$escapeHtml(opt_data.question.questionKey), '" title="', soy.$$escapeHtml(opt_data.question.questionText), '"></div></div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderLoginUserForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form method="post" id="loginMacForm" class="aui top-label ajs-dirty-warning-exempt"><h3>', soy.$$escapeHtml(AJS.format("Please sign in to your {0} account","my.atlassian.com")), '</h3><p>', soy.$$escapeHtml("Make sure you are connected to the internet before proceeding."), '</p><div id="formError"></div><div id="formWarning"></div><div class="aui-group"><div class="aui-item"><label for="username">', soy.$$escapeHtml("Email Address"), '</label><input class="text full-width-field" type="text" id="username" name="username" title="', soy.$$escapeHtml("Email Address"), '"></div><div class="aui-item"><label for="password">', soy.$$escapeHtml("Password"), '</label><input class="text full-width-field" type="password" id="password" name="password" title="', soy.$$escapeHtml("Password"), '"></div></div><div class="aui-group"><div class="aui-item"><p id="login-forgot-password"><a href="https://id.atlassian.com/login/resetpassword" target="_blank">', soy.$$escapeHtml("Forgot your password?"), '</a></p></div></div><div class="buttons-container"><div class="buttons"><input class="aui-button aui-button-primary" type="submit" value="', soy.$$escapeHtml("Sign in and generate license key"), '">');
  JIRA.Templates.LicenseSetup.renderAdditionalButtons(null, output);
  output.append('</div></div></form>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderAdditionalButtons = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<input class="aui-button aui-button-primary plugin-license-next-button hidden" type="submit" value="', soy.$$escapeHtml("Next"), '"><a class="cancel plugin-license-retry-button hidden" href="#">', soy.$$escapeHtml("Retry"), '</a><div class="throbbers-placeholder"></div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderExistingLicenseForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var macLink__soy168 = new soy.StringBuilder('<a href="http://', soy.$$escapeHtml("my.atlassian.com"), '" target="_blank">', soy.$$escapeHtml("my.atlassian.com"), '</a>');
  macLink__soy168 = macLink__soy168.toString();
  output.append('<form method="post" id="importLicenseForm" class="aui ajs-dirty-warning-exempt"><h3><span class="import-license-header-no-bundle hidden">', soy.$$escapeHtml("Please enter your license key"), '</span><span class="import-license-header-bundle-selected hidden">', soy.$$escapeHtml("Entering your licenses"), '</span></h3><p class="existing-license-login-information hidden">', AJS.format("You need to log into {0} to generate an evaluation for your chosen plugin. Enter your login details, and then enter your JIRA license key.",macLink__soy168), '</p><div id="formError"></div><div id="formWarning"></div><div class="existing-licence-login-fields hidden"><div class="field-group"><label for="existing-username">', soy.$$escapeHtml("Email Address"), '</label><input class="text" type="text" id="existing-username" name="username" title="', soy.$$escapeHtml("Email Address"), '"></div><div class="field-group"><label for="existing-password">', soy.$$escapeHtml("Password"), '</label><input class="text" type="password" id="existing-password" name="password" title="', soy.$$escapeHtml("Password"), '"><div class="description"><a href="https://id.atlassian.com/login/resetpassword" target="_blank">', soy.$$escapeHtml("Forgot your password?"), '</a></div></div></div><div class="field-group"><label for="serverId">', soy.$$escapeHtml("Server ID"), '</label><span class="field-value" name="serverId" id="serverId" title="', soy.$$escapeHtml("Server ID"), '">', soy.$$escapeHtml(opt_data.serverId), '</span></div><div class="field-group"><label for="licenseKey">', soy.$$escapeHtml("Your JIRA License Key"), '</label><textarea class="textarea full-width-field license-key" rows="7" name="licenseKey" id="licenseKey" title="', soy.$$escapeHtml("Your JIRA License Key"), '"></textarea></div><div class="buttons-container"><div class="buttons"><input class="aui-button aui-button-primary" type="submit" value="', soy.$$escapeHtml("Next"), '"><a class="cancel plugin-license-retry2-button hidden" href="#">', soy.$$escapeHtml("Retry"), '</a>');
  JIRA.Templates.LicenseSetup.renderAdditionalButtons(null, output);
  output.append('</div></div></form>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.renderSpinner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="throbber-message"><span>', soy.$$escapeHtml(opt_data.msg), '</span></div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.fieldError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="', (opt_data.id) ? soy.$$escapeHtml(opt_data.id) : '', '" class="error">', (opt_data.msg) ? soy.$$escapeHtml(opt_data.msg) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.fieldMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="', (opt_data.id) ? soy.$$escapeHtml(opt_data.id) : '', '" class="warn">', (opt_data.msg) ? soy.$$escapeHtml(opt_data.msg) : '', '</div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.expandableFormError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message error shadowed"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml(opt_data.title), '</strong></p><p>', soy.$$escapeHtml(opt_data.msg), '</p><a href="#" id="expandError">', soy.$$escapeHtml("Show error details"), '</a><div id="expandedErrorMsg" class="hidden"><br />', soy.$$escapeHtml(opt_data.expandableMsg), '</div></div>');
  return opt_sb ? '' : output.toString();
};


JIRA.Templates.LicenseSetup.countrySelector = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<select class="select full-width-field" name="', soy.$$escapeHtml(opt_data.name), '" id="', soy.$$escapeHtml(opt_data.name), '" title="', soy.$$escapeHtml(opt_data.title), '"><optgroup><option value="AU">', soy.$$escapeHtml("Australia"), '</option><option value="CA">', soy.$$escapeHtml("Canada"), '</option><option value="DE">', soy.$$escapeHtml("Germany"), '</option><option value="JP">', soy.$$escapeHtml("Japan"), '</option><option value="GB">', soy.$$escapeHtml("United Kingdom"), '</option><option value="US">', soy.$$escapeHtml("United States of America"), '</option></optgroup><optgroup><option value="AD">', soy.$$escapeHtml("Andorra"), '</option><option value="AE">', soy.$$escapeHtml("United Arab Emirates"), '</option><option value="AF">', soy.$$escapeHtml("Afghanistan"), '</option><option value="AG">', soy.$$escapeHtml("Antigua and Barbuda"), '</option><option value="AI">', soy.$$escapeHtml("Anguilla"), '</option><option value="AL">', soy.$$escapeHtml("Albania"), '</option><option value="AM">', soy.$$escapeHtml("Armenia"), '</option><option value="AN">', soy.$$escapeHtml("Netherlands Antilles"), '</option><option value="AO">', soy.$$escapeHtml("Angola"), '</option><option value="AQ">', soy.$$escapeHtml("Antarctica"), '</option><option value="AR">', soy.$$escapeHtml("Argentina"), '</option><option value="AS">', soy.$$escapeHtml("American Samoa"), '</option><option value="AT">', soy.$$escapeHtml("Austria"), '</option><option value="AW">', soy.$$escapeHtml("Aruba"), '</option><option value="AZ">', soy.$$escapeHtml("Azerbaijan"), '</option><option value="BA">', soy.$$escapeHtml("Bosnia and Herzegovina"), '</option><option value="BB">', soy.$$escapeHtml("Barbados"), '</option><option value="BD">', soy.$$escapeHtml("Bangladesh"), '</option><option value="BE">', soy.$$escapeHtml("Belgium"), '</option><option value="BF">', soy.$$escapeHtml("Burkina Faso"), '</option><option value="BG">', soy.$$escapeHtml("Bulgaria"), '</option><option value="BH">', soy.$$escapeHtml("Bahrain"), '</option><option value="BI">', soy.$$escapeHtml("Burundi"), '</option><option value="BJ">', soy.$$escapeHtml("Benin"), '</option><option value="BM">', soy.$$escapeHtml("Bermuda"), '</option><option value="BN">', soy.$$escapeHtml("Brunei"), '</option><option value="BO">', soy.$$escapeHtml("Bolivia"), '</option><option value="BR">', soy.$$escapeHtml("Brazil"), '</option><option value="BS">', soy.$$escapeHtml("Bahamas"), '</option><option value="BT">', soy.$$escapeHtml("Bhutan"), '</option><option value="BV">', soy.$$escapeHtml("Bouvet Island"), '</option><option value="BW">', soy.$$escapeHtml("Botswana"), '</option><option value="BY">', soy.$$escapeHtml("Belarus"), '</option><option value="BZ">', soy.$$escapeHtml("Belize"), '</option><option value="CC">', soy.$$escapeHtml("Cocos (Keeling) Islands"), '</option><option value="CD">', soy.$$escapeHtml("Congo (Democratic People\x27s Republic)"), '</option><option value="CF">', soy.$$escapeHtml("Central African Republic"), '</option><option value="CG">', soy.$$escapeHtml("Congo (Republic of)"), '</option><option value="CH">', soy.$$escapeHtml("Switzerland"), '</option><option value="CI">', soy.$$escapeHtml("Cote d\x27Ivoire (Ivory Coast)"), '</option><option value="CK">', soy.$$escapeHtml("Cook Islands"), '</option><option value="CL">', soy.$$escapeHtml("Chile"), '</option><option value="CM">', soy.$$escapeHtml("Cameroon"), '</option><option value="CN">', soy.$$escapeHtml("China"), '</option><option value="CO">', soy.$$escapeHtml("Colombia"), '</option><option value="CR">', soy.$$escapeHtml("Costa Rica"), '</option><option value="CU">', soy.$$escapeHtml("Cuba"), '</option><option value="CV">', soy.$$escapeHtml("Cape Verde"), '</option><option value="CX">', soy.$$escapeHtml("Christmas Island"), '</option><option value="CY">', soy.$$escapeHtml("Cyprus"), '</option><option value="CZ">', soy.$$escapeHtml("Czech Republic"), '</option><option value="DJ">', soy.$$escapeHtml("Djibouti"), '</option><option value="DK">', soy.$$escapeHtml("Denmark"), '</option><option value="DM">', soy.$$escapeHtml("Dominica"), '</option><option value="DO">', soy.$$escapeHtml("Dominican Republic"), '</option><option value="DZ">', soy.$$escapeHtml("Algeria"), '</option><option value="EC">', soy.$$escapeHtml("Ecuador"), '</option><option value="EE">', soy.$$escapeHtml("Estonia"), '</option><option value="EG">', soy.$$escapeHtml("Egypt"), '</option><option value="EH">', soy.$$escapeHtml("Western Sahara"), '</option><option value="ER">', soy.$$escapeHtml("Eritrea"), '</option><option value="ES">', soy.$$escapeHtml("Spain"), '</option><option value="ET">', soy.$$escapeHtml("Ethiopia"), '</option><option value="FI">', soy.$$escapeHtml("Finland"), '</option><option value="FJ">', soy.$$escapeHtml("Fiji"), '</option><option value="FK">', soy.$$escapeHtml("Falkland Islands"), '</option><option value="FM">', soy.$$escapeHtml("Micronesia"), '</option><option value="FO">', soy.$$escapeHtml("Faroe Islands"), '</option><option value="FR">', soy.$$escapeHtml("France"), '</option><option value="GA">', soy.$$escapeHtml("Gabon"), '</option><option value="GD">', soy.$$escapeHtml("Grenada"), '</option><option value="GE">', soy.$$escapeHtml("Georgia"), '</option><option value="GF">', soy.$$escapeHtml("French Guiana"), '</option><option value="GG">', soy.$$escapeHtml("Guernsey"), '</option><option value="GH">', soy.$$escapeHtml("Ghana"), '</option><option value="GI">', soy.$$escapeHtml("Gibraltar"), '</option><option value="GL">', soy.$$escapeHtml("Greenland"), '</option><option value="GM">', soy.$$escapeHtml("Gambia"), '</option><option value="GN">', soy.$$escapeHtml("Guinea"), '</option><option value="GP">', soy.$$escapeHtml("Guadeloupe"), '</option><option value="GQ">', soy.$$escapeHtml("Equatorial Guinea"), '</option><option value="GR">', soy.$$escapeHtml("Greece"), '</option><option value="GS">', soy.$$escapeHtml("South Georgia and the South Sandwich Islands"), '</option><option value="GT">', soy.$$escapeHtml("Guatemala"), '</option><option value="GU">', soy.$$escapeHtml("Guam"), '</option><option value="GW">', soy.$$escapeHtml("Guinea-Bissau"), '</option><option value="GY">', soy.$$escapeHtml("Guyana"), '</option><option value="HK">', soy.$$escapeHtml("Hong Kong"), '</option><option value="HM">', soy.$$escapeHtml("Heard and McDonald Islands"), '</option><option value="HN">', soy.$$escapeHtml("Honduras"), '</option><option value="HR">', soy.$$escapeHtml("Croatia (Hrvatska)"), '</option><option value="HT">', soy.$$escapeHtml("Haiti"), '</option><option value="HU">', soy.$$escapeHtml("Hungary"), '</option><option value="ID">', soy.$$escapeHtml("Indonesia"), '</option><option value="IE">', soy.$$escapeHtml("Ireland"), '</option><option value="IL">', soy.$$escapeHtml("Israel"), '</option><option value="IM">', soy.$$escapeHtml("Isle of Man"), '</option><option value="IN">', soy.$$escapeHtml("India"), '</option><option value="IO">', soy.$$escapeHtml("British Indian Ocean Territory"), '</option><option value="IQ">', soy.$$escapeHtml("Iraq"), '</option><option value="IR">', soy.$$escapeHtml("Iran"), '</option><option value="IS">', soy.$$escapeHtml("Iceland"), '</option><option value="IT">', soy.$$escapeHtml("Italy"), '</option><option value="JE">', soy.$$escapeHtml("Jersey"), '</option><option value="JM">', soy.$$escapeHtml("Jamaica"), '</option><option value="JO">', soy.$$escapeHtml("Jordan"), '</option><option value="KE">', soy.$$escapeHtml("Kenya"), '</option><option value="KG">', soy.$$escapeHtml("Kyrgyzstan"), '</option><option value="KH">', soy.$$escapeHtml("Cambodia"), '</option><option value="KI">', soy.$$escapeHtml("Kiribati"), '</option><option value="KM">', soy.$$escapeHtml("Comoros"), '</option><option value="KN">', soy.$$escapeHtml("Saint Kitts and Nevis"), '</option><option value="KP">', soy.$$escapeHtml("Korea (North)"), '</option><option value="KR">', soy.$$escapeHtml("Korea (South)"), '</option><option value="KW">', soy.$$escapeHtml("Kuwait"), '</option><option value="KY">', soy.$$escapeHtml("Cayman Islands"), '</option><option value="KZ">', soy.$$escapeHtml("Kazakhstan"), '</option><option value="LA">', soy.$$escapeHtml("Laos"), '</option><option value="LB">', soy.$$escapeHtml("Lebanon"), '</option><option value="LC">', soy.$$escapeHtml("Saint Lucia"), '</option><option value="LI">', soy.$$escapeHtml("Liechtenstein"), '</option><option value="LK">', soy.$$escapeHtml("Sri Lanka"), '</option><option value="LR">', soy.$$escapeHtml("Liberia"), '</option><option value="LS">', soy.$$escapeHtml("Lesotho"), '</option><option value="LT">', soy.$$escapeHtml("Lithuania"), '</option><option value="LU">', soy.$$escapeHtml("Luxembourg"), '</option><option value="LV">', soy.$$escapeHtml("Latvia"), '</option><option value="LY">', soy.$$escapeHtml("Libya"), '</option><option value="MA">', soy.$$escapeHtml("Morocco"), '</option><option value="MC">', soy.$$escapeHtml("Monaco"), '</option><option value="MD">', soy.$$escapeHtml("Moldova"), '</option><option value="ME">', soy.$$escapeHtml("Montenegro"), '</option><option value="MG">', soy.$$escapeHtml("Madagascar"), '</option><option value="MH">', soy.$$escapeHtml("Marshall Islands"), '</option><option value="MK">', soy.$$escapeHtml("Macedonia"), '</option><option value="ML">', soy.$$escapeHtml("Mali"), '</option><option value="MM">', soy.$$escapeHtml("Myanmar"), '</option><option value="MN">', soy.$$escapeHtml("Mongolia"), '</option><option value="MO">', soy.$$escapeHtml("Macau"), '</option><option value="MP">', soy.$$escapeHtml("Northern Mariana Islands"), '</option><option value="MQ">', soy.$$escapeHtml("Martinique"), '</option><option value="MR">', soy.$$escapeHtml("Mauritania"), '</option><option value="MS">', soy.$$escapeHtml("Montserrat"), '</option><option value="MT">', soy.$$escapeHtml("Malta"), '</option><option value="MU">', soy.$$escapeHtml("Mauritius"), '</option><option value="MV">', soy.$$escapeHtml("Maldives"), '</option><option value="MW">', soy.$$escapeHtml("Malawi"), '</option><option value="MX">', soy.$$escapeHtml("Mexico"), '</option><option value="MY">', soy.$$escapeHtml("Malaysia"), '</option><option value="MZ">', soy.$$escapeHtml("Mozambique"), '</option><option value="NA">', soy.$$escapeHtml("Namibia"), '</option><option value="NC">', soy.$$escapeHtml("New Caledonia"), '</option><option value="NE">', soy.$$escapeHtml("Niger"), '</option><option value="NF">', soy.$$escapeHtml("Norfolk Island"), '</option><option value="NG">', soy.$$escapeHtml("Nigeria"), '</option><option value="NI">', soy.$$escapeHtml("Nicaragua"), '</option><option value="NL">', soy.$$escapeHtml("Netherlands"), '</option><option value="NO">', soy.$$escapeHtml("Norway"), '</option><option value="NP">', soy.$$escapeHtml("Nepal"), '</option><option value="NR">', soy.$$escapeHtml("Nauru"), '</option><option value="NU">', soy.$$escapeHtml("Niue"), '</option><option value="NZ">', soy.$$escapeHtml("New Zealand"), '</option><option value="OM">', soy.$$escapeHtml("Oman"), '</option><option value="PA">', soy.$$escapeHtml("Panama"), '</option><option value="PE">', soy.$$escapeHtml("Peru"), '</option><option value="PF">', soy.$$escapeHtml("French Polynesia"), '</option><option value="PG">', soy.$$escapeHtml("Papua New Guinea"), '</option><option value="PH">', soy.$$escapeHtml("Philippines"), '</option><option value="PK">', soy.$$escapeHtml("Pakistan"), '</option><option value="PL">', soy.$$escapeHtml("Poland"), '</option><option value="PM">', soy.$$escapeHtml("Saint Pierre and Miquelon"), '</option><option value="PN">', soy.$$escapeHtml("Pitcairn"), '</option><option value="PR">', soy.$$escapeHtml("Puerto Rico"), '</option><option value="PS">', soy.$$escapeHtml("Palestinian Territories"), '</option><option value="PT">', soy.$$escapeHtml("Portugal"), '</option><option value="PW">', soy.$$escapeHtml("Palau"), '</option><option value="PY">', soy.$$escapeHtml("Paraguay"), '</option><option value="QA">', soy.$$escapeHtml("Qatar"), '</option><option value="RE">', soy.$$escapeHtml("Reunion"), '</option><option value="RO">', soy.$$escapeHtml("Romania"), '</option><option value="RS">', soy.$$escapeHtml("Serbia"), '</option><option value="RU">', soy.$$escapeHtml("Russian Federation"), '</option><option value="RW">', soy.$$escapeHtml("Rwanda"), '</option><option value="SA">', soy.$$escapeHtml("Saudi Arabia"), '</option><option value="SB">', soy.$$escapeHtml("Solomon Islands"), '</option><option value="SC">', soy.$$escapeHtml("Seychelles"), '</option><option value="SD">', soy.$$escapeHtml("Sudan"), '</option><option value="SE">', soy.$$escapeHtml("Sweden"), '</option><option value="SG">', soy.$$escapeHtml("Singapore"), '</option><option value="SH">', soy.$$escapeHtml("Saint Helena"), '</option><option value="SI">', soy.$$escapeHtml("Slovenia"), '</option><option value="SJ">', soy.$$escapeHtml("Svalbard and Jan Mayen Islands"), '</option><option value="SK">', soy.$$escapeHtml("Slovak Republic"), '</option><option value="SL">', soy.$$escapeHtml("Sierra Leone"), '</option><option value="SM">', soy.$$escapeHtml("San Marino"), '</option><option value="SN">', soy.$$escapeHtml("Senegal"), '</option><option value="SO">', soy.$$escapeHtml("Somalia"), '</option><option value="SR">', soy.$$escapeHtml("Suriname"), '</option><option value="ST">', soy.$$escapeHtml("Sao Tome and Principe"), '</option><option value="SV">', soy.$$escapeHtml("El Salvador"), '</option><option value="SY">', soy.$$escapeHtml("Syria"), '</option><option value="SZ">', soy.$$escapeHtml("Swaziland"), '</option><option value="TC">', soy.$$escapeHtml("Turks and Caicos Islands"), '</option><option value="TD">', soy.$$escapeHtml("Chad"), '</option><option value="TF">', soy.$$escapeHtml("French Southern Territories"), '</option><option value="TG">', soy.$$escapeHtml("Togo"), '</option><option value="TH">', soy.$$escapeHtml("Thailand"), '</option><option value="TJ">', soy.$$escapeHtml("Tajikistan"), '</option><option value="TK">', soy.$$escapeHtml("Tokelau"), '</option><option value="TL">', soy.$$escapeHtml("Timor-Leste"), '</option><option value="TM">', soy.$$escapeHtml("Turkmenistan"), '</option><option value="TN">', soy.$$escapeHtml("Tunisia"), '</option><option value="TO">', soy.$$escapeHtml("Tonga"), '</option><option value="TR">', soy.$$escapeHtml("Turkey"), '</option><option value="TT">', soy.$$escapeHtml("Trinidad and Tobago"), '</option><option value="TV">', soy.$$escapeHtml("Tuvalu"), '</option><option value="TW">', soy.$$escapeHtml("Taiwan"), '</option><option value="TZ">', soy.$$escapeHtml("Tanzania"), '</option><option value="UA">', soy.$$escapeHtml("Ukraine"), '</option><option value="UG">', soy.$$escapeHtml("Uganda"), '</option><option value="UY">', soy.$$escapeHtml("Uruguay"), '</option><option value="UZ">', soy.$$escapeHtml("Uzbekistan"), '</option><option value="VA">', soy.$$escapeHtml("Vatican City"), '</option><option value="VC">', soy.$$escapeHtml("Saint Vincent and the Grenadines"), '</option><option value="VE">', soy.$$escapeHtml("Venezuela"), '</option><option value="VG">', soy.$$escapeHtml("Virgin Islands (British)"), '</option><option value="VI">', soy.$$escapeHtml("Virgin Islands (US)"), '</option><option value="VN">', soy.$$escapeHtml("Vietnam"), '</option><option value="VU">', soy.$$escapeHtml("Vanuatu"), '</option><option value="WF">', soy.$$escapeHtml("Wallis and Futuna Islands"), '</option><option value="WS">', soy.$$escapeHtml("Samoa"), '</option><option value="YE">', soy.$$escapeHtml("Yemen"), '</option><option value="YT">', soy.$$escapeHtml("Mayotte"), '</option><option value="ZA">', soy.$$escapeHtml("South Africa"), '</option><option value="ZM">', soy.$$escapeHtml("Zambia"), '</option><option value="ZW">', soy.$$escapeHtml("Zimbabwe"), '</option></optgroup></select>');
  return opt_sb ? '' : output.toString();
};

/* module-key = 'jira.webresources:jira-setup', location = '/includes/setup/setup-progress-tracking-iframe.js' */
define("jira/setup/setup-tracker",["jquery"],function($){var isDevMode=AJS.isDevMode?AJS.isDevMode():AJS.Meta.getBoolean("dev-mode");var iframeHost=isDevMode?"https://qa-wac.internal.atlassian.com":"https://www.atlassian.com";var iframeContextPath="/pingback";function dataToUrl(data){var queryStringParameters=[];for(var key in data){queryStringParameters.push(key+"="+encodeURIComponent(data[key]))}if(queryStringParameters.length){return"?"+queryStringParameters.join("&")}else{return""}}function insertIframe(paramsString){var deferred=$.Deferred();var $iframe=$("<iframe>").css("display","none").attr("src",iframeHost+iframeContextPath+paramsString);$iframe.load(function(){deferred.resolve()});$iframe.appendTo("body");setTimeout(function(){deferred.reject()},3000);return deferred.promise()}function getSetupSessionId(){var id=AJS.Meta.get("setup-session-id");var key="jira.setup.session.id";if(id){localStorage.setItem(key,id)}else{id=localStorage.getItem(key)}return id}function getDefaultParams(){return{"experimentalInstantSetup":"false","pg":window.location.pathname.replace(/\//g,"_"),"product":"jira","SEN":AJS.Meta.get("SEN"),"setupSessionId":getSetupSessionId(),"sid":AJS.Meta.get("server-id"),"v":AJS.Meta.get("version-number")}}function insert(){return insertIframe(dataToUrl(getDefaultParams()))}function sendMailConfigurationEvent(params){var params=params||{};var extParams=$.extend(getDefaultParams(),params);return insertIframe(dataToUrl(extParams))}return{insert:insert,sendMailConfigurationEvent:sendMailConfigurationEvent}});
